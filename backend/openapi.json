{"openapi":"3.1.0","info":{"title":"Tactile CAD Analysis API","description":"Long-running CAD analysis platform for DFM (Design for Manufacturing) feedback","contact":{"name":"Tactile Team","email":"team@tactile3d.dev"},"license":{"name":"MIT License","url":"https://opensource.org/licenses/MIT"},"version":"1.0.0"},"servers":[{"url":"http://localhost:8080","description":"Development Server"}],"tags":[{"name":"Files","description":"File Upload and Download"},{"name":"Jobs","description":"CAD Analysis Job Management"},{"name":"Users","description":"User Management"},{"name":"Health","description":"Health Check Endpoints"}],"paths":{"/api/jobs":{"get":{"tags":["Jobs"],"summary":"List user's jobs","description":"Get paginated list of jobs for the authenticated user","operationId":"listJobs","parameters":[{"name":"pageable","in":"query","required":true,"schema":{"$ref":"#/components/schemas/Pageable"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageJobResponse"}}}}}},"post":{"tags":["Jobs"],"summary":"Create analysis job","description":"Create a new CAD analysis job","operationId":"createJob","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateJobRequest"}}},"required":true},"responses":{"201":{"description":"Job created successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/JobResponse"}}}},"400":{"description":"Invalid request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/JobResponse"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/JobResponse"}}}}}}},"/api/jobs/{id}/resume":{"post":{"tags":["Jobs"],"summary":"Resume failed job","description":"Resume a failed job from the last checkpoint","operationId":"resumeJob","parameters":[{"name":"id","in":"path","description":"Job ID","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResumeJobRequest"}}}},"responses":{"200":{"description":"Job resumed","content":{"*/*":{"schema":{"$ref":"#/components/schemas/JobResponse"}}}},"400":{"description":"Cannot resume job in current state","content":{"*/*":{"schema":{"$ref":"#/components/schemas/JobResponse"}}}},"404":{"description":"Job not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/JobResponse"}}}}}}},"/api/files":{"post":{"tags":["Files"],"summary":"Upload file","description":"Upload a STEP/CAD file for analysis","operationId":"uploadFile","requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary","description":"STEP/CAD file to upload"}},"required":["file"]}}}},"responses":{"200":{"description":"File uploaded successfully","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}},"400":{"description":"Invalid file","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}}},"/api/users/me":{"get":{"tags":["Users"],"summary":"Get current user","description":"Get the authenticated user's profile","operationId":"getCurrentUser","responses":{"401":{"description":"Not authenticated","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"200":{"description":"User profile returned","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}}},"/api/jobs/{id}":{"get":{"tags":["Jobs"],"summary":"Get job status","description":"Get the current status and details of a job","operationId":"getJob","parameters":[{"name":"id","in":"path","description":"Job ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Job found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/JobResponse"}}}},"404":{"description":"Job not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/JobResponse"}}}}}},"delete":{"tags":["Jobs"],"summary":"Cancel job","description":"Cancel a running job","operationId":"cancelJob","parameters":[{"name":"id","in":"path","description":"Job ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Job cancelled","content":{"*/*":{"schema":{"$ref":"#/components/schemas/JobResponse"}}}},"404":{"description":"Job not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/JobResponse"}}}},"400":{"description":"Cannot cancel job in current state","content":{"*/*":{"schema":{"$ref":"#/components/schemas/JobResponse"}}}}}}},"/api/jobs/{id}/results":{"get":{"tags":["Jobs"],"summary":"Get analysis results","description":"Get the analysis results for a completed job","operationId":"getResults","parameters":[{"name":"id","in":"path","description":"Job ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Results found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AnalysisResult"}}}},"404":{"description":"Results not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AnalysisResult"}}}}}}},"/api/health":{"get":{"tags":["Health"],"summary":"Health check","description":"Check if the API is running","operationId":"health","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}}}},"/api/files/{fileId}":{"get":{"tags":["Files"],"summary":"Download file","description":"Download a file by ID","operationId":"downloadFile","parameters":[{"name":"fileId","in":"path","description":"File ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"File downloaded","content":{"*/*":{"schema":{"type":"string","format":"binary"}}}},"404":{"description":"File not found","content":{"*/*":{"schema":{"type":"string","format":"binary"}}}}}},"delete":{"tags":["Files"],"summary":"Delete file","description":"Delete a file by ID","operationId":"deleteFile","parameters":[{"name":"fileId","in":"path","description":"File ID","required":true,"schema":{"type":"string"}}],"responses":{"204":{"description":"File deleted"},"404":{"description":"File not found"}}}}},"components":{"schemas":{"CreateJobRequest":{"type":"object","description":"Request to create a new CAD analysis job","properties":{"manufacturingProcess":{"type":"string","description":"Manufacturing process to analyze for","enum":["INJECTION_MOLDING","CNC_MACHINING","FDM_3D_PRINTING"],"example":"FDM_3D_PRINTING"},"material":{"type":"string","description":"Material type (optional)","example":"ABS"},"fileStorageId":{"type":"string","description":"File storage ID from upload","example":"65a1b2c3d4e5f6g7h8i9j0k1"},"originalFilename":{"type":"string","description":"Original filename","example":"bracket.step"}},"required":["manufacturingProcess"]},"JobResponse":{"type":"object","description":"Job details response","properties":{"id":{"type":"string","description":"Job ID"},"userId":{"type":"string","description":"User ID who created the job"},"status":{"type":"string","description":"Current job status","enum":["QUEUED","PARSING","ANALYZING","SUGGESTING","VALIDATING","COMPLETED","FAILED","CANCELLED"]},"originalFilename":{"type":"string","description":"Original filename"},"fileStorageId":{"type":"string","description":"File storage ID"},"manufacturingProcess":{"type":"string","description":"Manufacturing process","enum":["INJECTION_MOLDING","CNC_MACHINING","FDM_3D_PRINTING"]},"material":{"type":"string","description":"Material type"},"currentStage":{"type":"string","description":"Current processing stage"},"progressPercent":{"type":"integer","format":"int32","description":"Progress percentage (0-100)"},"stagesCompleted":{"type":"array","description":"List of completed stages","items":{"type":"string"}},"createdAt":{"type":"string","format":"date-time","description":"Job creation timestamp"},"startedAt":{"type":"string","format":"date-time","description":"Job start timestamp"},"completedAt":{"type":"string","format":"date-time","description":"Job completion timestamp"},"errorMessage":{"type":"string","description":"Error message if failed"},"retryCount":{"type":"integer","format":"int32","description":"Retry count"},"totalIssues":{"type":"integer","format":"int32","description":"Total issues found"},"criticalIssues":{"type":"integer","format":"int32","description":"Critical issues count"},"warnings":{"type":"integer","format":"int32","description":"Warnings count"}}},"ResumeJobRequest":{"type":"object","description":"Request to resume a failed job","properties":{"checkpointId":{"type":"string","description":"Checkpoint ID to resume from (optional, uses latest if null)"}}},"UserResponse":{"type":"object","description":"User details response","properties":{"id":{"type":"string","description":"User ID"},"email":{"type":"string","description":"User email"},"name":{"type":"string","description":"User display name"},"avatarUrl":{"type":"string","description":"Avatar URL"},"oauthProvider":{"type":"string","description":"OAuth provider (github)"},"createdAt":{"type":"string","format":"date-time","description":"Account creation date"},"subscriptionTier":{"type":"string","description":"Subscription tier","enum":["FREE","PRO","ENTERPRISE"]},"usageThisMonth":{"type":"integer","format":"int32","description":"Usage count this month"}}},"Pageable":{"type":"object","properties":{"page":{"type":"integer","format":"int32","minimum":0},"size":{"type":"integer","format":"int32","minimum":1},"sort":{"type":"array","items":{"type":"string"}}}},"PageJobResponse":{"type":"object","properties":{"totalPages":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"},"pageable":{"$ref":"#/components/schemas/Pageablenull"},"first":{"type":"boolean"},"last":{"type":"boolean"},"numberOfElements":{"type":"integer","format":"int32"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"$ref":"#/components/schemas/JobResponse"}},"number":{"type":"integer","format":"int32"},"sort":{"$ref":"#/components/schemas/Sortnull"},"empty":{"type":"boolean"}}},"Pageablenull":{"type":"object","properties":{"paged":{"type":"boolean"},"pageNumber":{"type":"integer","format":"int32"},"pageSize":{"type":"integer","format":"int32"},"unpaged":{"type":"boolean"},"offset":{"type":"integer","format":"int64"},"sort":{"$ref":"#/components/schemas/Sortnull"}}},"Sortnull":{"type":"object","properties":{"sorted":{"type":"boolean"},"unsorted":{"type":"boolean"},"empty":{"type":"boolean"}}},"AnalysisResult":{"type":"object","properties":{"id":{"type":"string"},"jobId":{"type":"string"},"boundingBox":{"$ref":"#/components/schemas/BoundingBox"},"volume":{"type":"number","format":"double"},"surfaceArea":{"type":"number","format":"double"},"faceCount":{"type":"integer","format":"int32"},"edgeCount":{"type":"integer","format":"int32"},"issues":{"type":"array","items":{"$ref":"#/components/schemas/Issue"}},"issuesBySeverity":{"type":"object","additionalProperties":{"type":"integer","format":"int32"}},"suggestions":{"type":"array","items":{"$ref":"#/components/schemas/Suggestion"}},"generatedCodeSnippets":{"type":"array","items":{"$ref":"#/components/schemas/CodeSnippet"}},"modifiedStepFileId":{"type":"string"},"previewImageIds":{"type":"array","items":{"type":"string"}},"createdAt":{"type":"string","format":"date-time"}}},"BoundingBox":{"type":"object","properties":{"minX":{"type":"number","format":"double"},"minY":{"type":"number","format":"double"},"minZ":{"type":"number","format":"double"},"maxX":{"type":"number","format":"double"},"maxY":{"type":"number","format":"double"},"maxZ":{"type":"number","format":"double"},"height":{"type":"number","format":"double"},"depth":{"type":"number","format":"double"},"width":{"type":"number","format":"double"}}},"CodeSnippet":{"type":"object","properties":{"id":{"type":"string"},"description":{"type":"string"},"code":{"type":"string"},"language":{"type":"string"},"validated":{"type":"boolean"}}},"Issue":{"type":"object","properties":{"ruleId":{"type":"string"},"ruleName":{"type":"string"},"severity":{"type":"string","enum":["ERROR","WARNING","INFO"]},"description":{"type":"string"},"affectedFeatures":{"type":"array","items":{"type":"string"}},"recommendation":{"type":"string"},"autoFixAvailable":{"type":"boolean"}}},"Suggestion":{"type":"object","properties":{"issueId":{"type":"string"},"description":{"type":"string"},"expectedImprovement":{"type":"string"},"priority":{"type":"integer","format":"int32"},"codeSnippet":{"type":"string"},"validated":{"type":"boolean"}}}}}}
